(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2061],{48416:function(e,i,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home/dashboard/actividadMaquinas",function(){return s(61874)}])},6947:function(e,i,s){"use strict";s.d(i,{Z:function(){return y}});var r=s(24246),o=s(2706),n=s(27378),t=s(24426),a=s(23438),c=s(38579),l=s.n(c),d=[{id:"apartadoDashboard",descripcion:"Dashboard",icono:a.Ccq,rolesValidos:[1],subdivicion:[{id:"1.1",url:"/home/dashboard/actividadMaquinas",descripcion:"Actividad de maquinas",icono:a.jIK},{id:"1.2",url:"/home/dashboard/accesosRecientes",descripcion:"Accesos Recientes",icono:a.C5N},{id:"1.3",url:"/home/dashboard/statusDispositivos",descripcion:"Status de dispositivos",icono:a.nAD}]},{id:"apartadoRegistros",descripcion:"Registros",icono:a.RpA,rolesValidos:[1],subdivicion:[{id:"2.1",url:"/home/registros/listaReportes",descripcion:"Reportes",icono:a.Jg$},{id:"2.2",url:"/home/registros/listaPermisos",descripcion:"Permisos",icono:a.fSC},{id:"2.3",url:"/home/registros/listaEmpleados",descripcion:"Empelados",icono:a.iXj},{id:"2.4",url:"/home/registros/listaRoles",descripcion:"Roles",icono:a.BkA},{id:"2.5",url:"/home/registros/listaTiposReportes",descripcion:"Tipos de Reportes",icono:a.jG6},{id:"2.6",url:"/home/registros/listaZonas",descripcion:"Zonas",icono:a.U2$},{id:"2.7",url:"/home/registros/listaUsuarios",descripcion:"Usuarios",icono:a.rI3},{id:"2.8",url:"/home/registros/listaDispositivos",descripcion:"Dispositivos IoT",icono:a.sVq},{id:"2.9",url:"/home/registros/listaTiposDispositivos",descripcion:"Tipos de Dispositivos IoT",icono:a.k0V},{id:"2.10",url:"/home/registros/listaDiasLaborales",descripcion:"D\xedas Laborales",icono:a.KXE},{id:"2.11",url:"/home/registros/listaHorarios",descripcion:"Horarios",icono:a.SNP},{id:"2.12",url:"/home/registros/listaRecursos",descripcion:"Recursos",icono:a.b82},{id:"2.13",url:"/home/registros/listaReportesActividades",descripcion:"Reporte de actividades",icono:a.Ts},{id:"2.14",url:"/home/registros/listaReportesAccesos",descripcion:"Reporte de accesos",icono:a.WBq},{id:"2.15",url:"/home/registros/listaReportesChequeos",descripcion:"Reporte de chequeos",icono:a.m6I},{id:"2.16",url:"/home/registros/listaReportesDispositivos",descripcion:"Reporte de dispositivos",icono:a.sdH}]},{id:"apartadoReportes",descripcion:"Reportes",icono:a.DEP,rolesValidos:[1,5],subdivicion:[{id:"3.1",url:"/home/reportes/horasTrabajadas",descripcion:"Horas trabajadas",icono:a.W9$,rolesValidos:[1]},{id:"3.2",url:"/home/reportes/historialActividadMaquinas",descripcion:"Historial de actividad de maquinas",icono:a.Ucg,rolesValidos:[1]},{id:"3.3",url:"/home/reportes/dibujos",descripcion:"Reportes de dibujos",icono:a.sNV,rolesValidos:[1,5]}]},{id:"apartadoEmpleados",descripcion:"Empleados",icono:a.L_H,rolesValidos:[1],subdivicion:[{id:"4.1",url:"/home/empleados/registrosEmpleados",descripcion:"Registros de empleados",icono:a.WlA},{id:"4.2",url:"/home/empleados/horariosEmpleados",descripcion:"Horarios de empleados",icono:a.TO6}]}],u=s(86677),p=s(78350),f=s(55782),v=s(31804),g=s(35979),m=s(89823),h=s.n(m),b=s(86246),j=s(80333),x=function(e,i){return!i||(i.length<=0||!!i.includes(e))},O=function(e,i,s,o){return i.map((function(i){if(!x(s,i.rolesValidos))return(0,r.jsx)(r.Fragment,{});if(!i.subdivicion){var n=i.url.split("/").pop();return(0,r.jsx)(f.Z,{children:(0,r.jsxs)(g.Z,{id:n,className:"botonBarraNavegacion",active:e==i.url,href:i.url,"aria-current":"page",color:"primary",block:!0,outline:!0,size:"sm",children:[(0,r.jsx)(h(),{className:"iconoBoton",path:i.icono,size:2}),o?(0,r.jsx)(b.Z,{placement:"right",target:n,children:i.descripcion}):i.descripcion]},i.id)},i.id)}var t=!1,a=i.subdivicion.map((function(i){if(!x(s,i.rolesValidos))return(0,r.jsx)(r.Fragment,{});e==i.url&&(t=!0);var n=i.url.split("/").pop();return(0,r.jsxs)(g.Z,{id:n,className:"botonBarraNavegacion",active:e==i.url,href:i.url,"aria-current":"page",color:"primary",block:!0,outline:!0,size:"sm",children:[(0,r.jsx)(h(),{className:"iconoBoton",path:i.icono,size:2}),o?(0,r.jsx)(b.Z,{placement:"right",target:n,children:i.descripcion}):i.descripcion]},i.id)}));return(0,r.jsxs)(f.Z,{children:[(0,r.jsxs)(g.Z,{id:i.id,className:"botonBarraNavegacion",color:"primary",active:t,block:!0,outline:!0,size:"sm",children:[(0,r.jsx)(h(),{className:"iconoBoton",path:i.icono,size:2}),o?(0,r.jsx)(b.Z,{placement:"right",target:i.id,children:i.descripcion}):i.descripcion]}),(0,r.jsx)(j.Z,{className:"subMenuBarraNavegacion",toggler:"#"+i.id,defaultOpen:t,navbar:!0,children:a})]},i.id)}))};function Z(e){var i=(0,o.Z)(n.useState(!1),2),s=i[0],c=i[1],m=(0,o.Z)(n.useState(void 0),2),b=m[0],j=m[1];n.useEffect((function(){window.sessionStorage.getItem("rol")&&j(parseInt(window.sessionStorage.getItem("rol")))}),[]),n.useEffect((function(){console.log("refrescamiento del componente")}),[b]);var x=(0,u.useRouter)(),Z=x.pathname,y=s?"barraNavegacion-compacto":"barraNavegacion";return(0,r.jsxs)(p.Z,{className:y+" nav nav-pills bg-dark v-pills-tabContent",children:[(0,r.jsxs)(f.Z,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(l(),{src:t.Z,height:60,width:81})}),(0,r.jsx)("div",{className:"separacionNavegacion"})]}),(0,r.jsx)(f.Z,{children:(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(g.Z,{className:"botonLogout",color:"warning",outline:!0,block:!0,onClick:function(){window.ipc.send("sesion_terminada",void 0),sessionStorage.removeItem("token"),x.push("/")},size:"sm",children:(0,r.jsx)(h(),{path:a.GyE,size:1})}),(0,r.jsx)(g.Z,{className:"botonCompactarSideBar",color:"warning",size:"sm",outline:!0,block:!0,onClick:function(){c(!s)},children:s?(0,r.jsx)(h(),{path:a.ddk,size:1}):(0,r.jsx)(h(),{path:a.XIn,size:1})})]})}),(0,r.jsx)("br",{}),O(Z,d,b,s)]})}function y(e){var i=e.children;return(0,r.jsxs)("main",{children:[(0,r.jsx)(Z,{}),(0,r.jsx)("br",{}),i,(0,r.jsx)("br",{})]})}},61874:function(e,i,s){"use strict";s.r(i),s.d(i,{default:function(){return D}});var r=s(24246),o=(s(48697),s(27378)),n=s(30985),t=s(74246),a=s(27492),c=s(6947),l=s(2706),d=s(26508),u=s(11355),p=s(70870),f=s(63115),v=s(35979),g=s(10798);function m(e){return(0,r.jsx)(n.Z,{children:(0,r.jsxs)(t.Z,{children:[(0,r.jsx)(a.Z,{children:(0,r.jsx)(g.Z,{id:"idDispositivo",placeholder:"ID del dispositivo",type:"text",onChange:function(i){var s=i.target;e.parametrosBusqueda.setIdDispositivo(s.value)}})}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(g.Z,{id:"descripcionDispositivo",placeholder:"Descripci\xf3n del dispositivo",type:"text",onChange:function(i){var s=i.target;e.parametrosBusqueda.setDescripcionDispositivo(s.value)}})})]})})}var h=s(91787),b=s(50010);function j(e){var i=(0,l.Z)(o.useState(b.Z.DESCONECTADO),2),s=i[0],c=i[1],g=(0,l.Z)(o.useState(!0),2),j=g[0],x=g[1],O=(0,l.Z)(o.useState(1),2),Z=O[0];O[1];o.useEffect((function(){e.registros&&(window.ipc.send("emitir_evento_socket",{evento:"peticion_estatus",parametros:e.registros[e.indexRegistro].id}),c(window.ipc.sendSync("estatus_dispositivo",null)))}),[e.registros,j]),setTimeout((function(){(0,h.I)(j,x)}),1e3*Z);var y=function(i){var r="warning";if(i==e.indexRegistro)switch(console.log(s),s){case b.Z.BLOQUEADO:r="danger";break;case b.Z.CONECTADO:r="success";break;case b.Z.DESCONECTADO:r="secondary";break;case b.Z.OCUPADO:r="warning";break;case b.Z.LIBRE:r="info";break;default:r="danger"}return r};return(0,r.jsxs)(u.Z,{color:"dark",children:[function(){var i="Cargando...";return e.registros[e.indexRegistro]&&(i="Reporte de "+e.registros[e.indexRegistro].descripcionDispositivo),(0,r.jsx)(d.Z,{className:"text-white",children:i})}(),(0,r.jsx)(p.Z,{children:(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(m,{parametrosBusqueda:e.parametrosBusqueda})})}),(0,r.jsx)("br",{}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(f.Z,{dark:!0,responsive:!0,borderless:!0,children:(0,r.jsx)("tbody",{children:(0,r.jsx)("tr",{children:e.registros.map((function(i,s){return(0,r.jsx)("td",{style:{padding:"0%"},children:(0,r.jsx)(v.Z,{block:!0,outline:!0,color:y(s),style:{border:"0px",borderRadius:"0px",whiteSpace:"nowrap"},active:s==e.indexRegistro,onClick:function(){e.setIndexRegistro(s)},children:i.descripcionDispositivo})})}))})})})})})]})})]})}function x(e){return(0,r.jsxs)(n.Z,{children:[(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(j,{parametrosBusqueda:e.parametrosBusqueda,indexRegistro:e.elementosOpciones.indexRegistro,setIndexRegistro:e.elementosOpciones.setIndexRegistro,registros:e.elementosOpciones.listaRegistrosDispositivos})})}),(0,r.jsx)("br",{}),e.children]})}var O=s(49039),Z=s(93691),y=s(11123),R=s(10031),N=s(42088);function E(e){var i=(0,l.Z)(o.useState(!0),2),s=i[0],c=i[1],d=(0,l.Z)(o.useState(0),2),u=d[0],p=d[1],f=(0,l.Z)(o.useState(null),2),v=(f[0],f[1],(0,l.Z)(o.useState(5),2)),g=v[0],m=(v[1],(0,l.Z)(o.useState(null),2)),h=m[0],b=m[1],j=(0,l.Z)(o.useState(null),2),E=j[0],D=j[1],w=(0,l.Z)(o.useState(null),2),I=w[0],S=w[1];o.useEffect((function(){!function(e,i,s){(0,R.O5)((function(i){e(i.registros)}),{idTipoDispositivoVinculado:3},(function(e){console.log(e)}),(function(){e(null),i(!0)}),(function(){s?s():i(!1)}))}(b,c,(function(){}))}),[u]),o.useEffect((function(){h&&function(e,i,s,r){(0,N.Uq)((function(i){e({tiempoActividadTotal:i.tiempoActividadTotal,tiempoInactivoTotal:i.tiempoInactivoTotal})}),s,(function(e){console.log(e)}),(function(){e(null),i(!0)}),(function(){r?r():i(!1)}))}(D,c,{id:h[u].id},(function(){!function(e,i,s,r){(0,N.JM)((function(i){e(i.registros)}),s,(function(e){console.log(e)}),(function(){e(null),i(!0)}),(function(){r?r():i(!1)}))}(S,c,{offset:0,limit:5,id:h[u].id})}))}),[h]);var k={indexRegistro:u,setIndexRegistro:p,listaRegistrosDispositivos:h};return!s&&h&&E&&I?(0,r.jsx)(x,{tituloGrid:"Actividad de "+h[u].descripcionDispositivo,parametrosBusqueda:{setIdDispositivo:function(){},setDescripcionDispositivo:function(){},setSemanaReporte:function(){}},elementosOpciones:k,children:(0,r.jsx)(n.Z,{children:(0,r.jsxs)(t.Z,{children:[(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(O.Z,{registro:I[0].empleado,indexRegistro:0})})}),(0,r.jsx)("br",{}),(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(Z.Z,{registros:I.map((function(e){return e.empleado})),limiteOperadores:g})})})]}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(y.Z,{tituloGrafico:"Reporte de "+h[u].descripcionDispositivo+" horas activa vs inactiva",reporte:E})})]})})}):""}function D(){return(0,r.jsx)(o.Fragment,{children:(0,r.jsx)(n.Z,{fluid:!0,children:(0,r.jsx)(t.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(E,{})})})})})}D.getLayout=function(e){return(0,r.jsx)(c.Z,{children:e})}},91787:function(e,i,s){"use strict";function r(e,i){i(!e)}s.d(i,{I:function(){return r}})},50010:function(e,i,s){"use strict";s.d(i,{Z:function(){return r}});var r={DESCONECTADO:0,CONECTADO:1,LIBRE:2,PERIFERICOS_NO_INICIALIZADOS:4,OCUPADO:8,BLOQUEADO:16,LIBRE_3:32,LIBRE_4:64,LIBRE_5:128}},70870:function(e,i,s){"use strict";var r=s(27378),o=s(23615),n=s.n(o),t=s(60042),a=s.n(t),c=s(75133),l=["className","cssModule","innerRef","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function u(e,i){if(null==e)return{};var s,r,o=function(e,i){if(null==e)return{};var s,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||(o[s]=e[s]);return o}(e,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}var p={className:n().string,cssModule:n().object,innerRef:n().oneOfType([n().object,n().string,n().func]),tag:c.iC};function f(e){var i=e.className,s=e.cssModule,o=e.innerRef,n=e.tag,t=void 0===n?"div":n,p=u(e,l),f=(0,c.mx)(a()(i,"card-body"),s);return r.createElement(t,d({},p,{className:f,ref:o}))}f.propTypes=p,i.Z=f},26508:function(e,i,s){"use strict";var r=s(27378),o=s(23615),n=s.n(o),t=s(60042),a=s.n(t),c=s(75133),l=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function u(e,i){if(null==e)return{};var s,r,o=function(e,i){if(null==e)return{};var s,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||(o[s]=e[s]);return o}(e,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}var p={className:n().string,cssModule:n().object,tag:c.iC};function f(e){var i=e.className,s=e.cssModule,o=e.tag,n=void 0===o?"div":o,t=u(e,l),p=(0,c.mx)(a()(i,"card-header"),s);return r.createElement(n,d({},t,{className:p}))}f.propTypes=p,i.Z=f},96129:function(e,i,s){"use strict";var r=s(27378),o=s(23615),n=s.n(o),t=s(60042),a=s.n(t),c=s(75133),l=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function u(e,i){if(null==e)return{};var s,r,o=function(e,i){if(null==e)return{};var s,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||(o[s]=e[s]);return o}(e,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}var p={className:n().string,cssModule:n().object,tag:c.iC};function f(e){var i=e.className,s=e.cssModule,o=e.tag,n=void 0===o?"p":o,t=u(e,l),p=(0,c.mx)(a()(i,"card-text"),s);return r.createElement(n,d({},t,{className:p}))}f.propTypes=p,i.Z=f},80311:function(e,i,s){"use strict";var r=s(27378),o=s(23615),n=s.n(o),t=s(60042),a=s.n(t),c=s(75133),l=["className","cssModule","tag"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function u(e,i){if(null==e)return{};var s,r,o=function(e,i){if(null==e)return{};var s,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||(o[s]=e[s]);return o}(e,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}var p={className:n().string,cssModule:n().object,tag:c.iC};function f(e){var i=e.className,s=e.cssModule,o=e.tag,n=void 0===o?"div":o,t=u(e,l),p=(0,c.mx)(a()(i,"card-title"),s);return r.createElement(n,d({},t,{className:p}))}f.propTypes=p,i.Z=f},63115:function(e,i,s){"use strict";var r=s(27378),o=s(23615),n=s.n(o),t=s(60042),a=s.n(t),c=s(75133),l=["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"];function d(){return d=Object.assign?Object.assign.bind():function(e){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},d.apply(this,arguments)}function u(e,i){if(null==e)return{};var s,r,o=function(e,i){if(null==e)return{};var s,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||(o[s]=e[s]);return o}(e,i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)s=n[r],i.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(o[s]=e[s])}return o}var p={bordered:n().bool,borderless:n().bool,className:n().string,cssModule:n().object,dark:n().bool,hover:n().bool,innerRef:n().oneOfType([n().func,n().string,n().object]),responsive:n().oneOfType([n().bool,n().string]),responsiveTag:c.iC,size:n().string,striped:n().bool,tag:c.iC};function f(e){var i=e.className,s=e.cssModule,o=e.size,n=e.bordered,t=e.borderless,p=e.striped,f=e.dark,v=e.hover,g=e.responsive,m=e.tag,h=void 0===m?"table":m,b=e.responsiveTag,j=void 0===b?"div":b,x=e.innerRef,O=u(e,l),Z=(0,c.mx)(a()(i,"table",!!o&&"table-"+o,!!n&&"table-bordered",!!t&&"table-borderless",!!p&&"table-striped",!!f&&"table-dark",!!v&&"table-hover"),s),y=r.createElement(h,d({},O,{ref:x,className:Z}));if(g){var R=(0,c.mx)(!0===g?"table-responsive":"table-responsive-".concat(g),s);return r.createElement(j,{className:R},y)}return y}f.propTypes=p,i.Z=f}},function(e){e.O(0,[9080,7815,1798,2234,313,8023,3494,9774,2888,179],(function(){return i=48416,e(e.s=i);var i}));var i=e.O();_N_E=i}]);